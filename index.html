<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pedidos de Ora√ß√£o</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap"
      rel="stylesheet"
    />

    <style>
      /* üé® Vari√°veis */
      :root {
        --bg: #f5f5f5;
        --card: #ffffff;
        --text: #222;
        --accent: #0a84ff;
        --accent-light: #62a8ff;
        --border: #e5e5e5;
        --tab-bg: #ffffff;
      }

      /* üåô Modo Escuro */
      body.dark {
        --bg: #1a1a1a;
        --card: #252525;
        --text: #eaeaea;
        --accent: #4aa3ff;
        --accent-light: #6bb6ff;
        --border: #444;
        --tab-bg: #111;
      }

      body {
        margin: 0;
        background: var(--bg);
        color: var(--text);
        font-family: "Poppins", sans-serif;
        transition: 0.3s;
      }

      /* Header */
      header {
        background: var(--card);
        padding: 20px;
        text-align: center;
        position: relative;
        border-bottom: 1px solid var(--border);
      }

      .logo {
        width: 120px;
        height: 120px;
        margin: 0 auto;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .logo img {
        position: absolute;
        top: 0;
        left: 0;
        width: 120px;
        transition: opacity 0.3s;
      }

      h2 {
        margin-top: 5px;
      }

      /* Bot√£o modo escuro */
      .dark-toggle {
        position: absolute;
        right: 15px;
        top: 15px;
        font-size: 22px;
        cursor: pointer;
        user-select: none;
      }

      /* Abas */
      .tabs {
        display: flex;
        background: var(--tab-bg);
        border-bottom: 1px solid var(--border);
      }

      .tab {
        flex: 1;
        padding: 15px;
        text-align: center;
        cursor: pointer;
        font-weight: 600;
        border-bottom: 3px solid transparent;
        transition: 0.3s;
      }

      .tab.active {
        border-color: var(--accent);
        color: var(--accent);
      }

      /* Conte√∫do */
      .content {
        display: none;
        padding: 20px;
        animation: fade 0.4s;
      }

      .content.active {
        display: block;
      }

      @keyframes fade {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Cards */
      .card {
        background: var(--card);
        padding: 16px;
        margin-bottom: 12px;
        border-radius: 12px;
        border: 1px solid var(--border);
        animation: slide 0.4s;
      }

      @keyframes slide {
        from {
          transform: translateX(-10px);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      .card h3 {
        margin: 0 0 6px 0;
        font-size: 17px;
      }

      .card p {
        margin: 5px 0;
      }

      .date {
        font-size: 12px;
        opacity: 0.6;
      }

      /* Formul√°rio */
      input,
      textarea {
        width: 100%;
        padding: 14px;
        margin: 10px 0;
        border-radius: 10px;
        border: 1px solid var(--border);
        background: var(--card);
        color: var(--text);
        font-size: 15px;
      }

      button {
        width: 100%;
        background: var(--accent);
        color: white;
        padding: 14px;
        border: none;
        border-radius: 10px;
        font-size: 16px;
        cursor: pointer;
        transition: 0.2s;
        margin-top: 10px;
      }

      button:hover {
        background: var(--accent-light);
      }

      #status {
        margin-top: 10px;
        font-weight: 600;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <header>
      <div class="dark-toggle" onclick="toggleDark()">üåô</div>

      <div class="logo">
        <img
          class="logo-preto"
          src="./assets/logo-ipb-preto.png"
          alt="Logo IPB"
        />
        <img
          class="logo-branco"
          src="./assets/logo-ipb-branco.png"
          alt="Logo IPB"
          style="opacity: 0"
        />
      </div>

      <h2>Pedidos de Ora√ß√£o</h2>
    </header>

    <div class="tabs">
      <div class="tab active" onclick="openTab('lista')">üìú Pedidos</div>
      <div class="tab" onclick="openTab('novo')">üôè Novo Pedido</div>
    </div>

    <!-- LISTA -->
    <div id="lista" class="content active">
      <div id="listaContainer"></div>
    </div>

    <!-- FORMUL√ÅRIO -->
    <div id="novo" class="content">
      <input type="text" id="nome" placeholder="Seu nome (opcional)" />
      <textarea
        id="pedido"
        placeholder="Seu pedido de ora√ß√£o"
        required
      ></textarea>
      <button onclick="enviarPedido()">Enviar Pedido</button>
      <p id="status"></p>
    </div>

    <script>
      const API_URL =
        "https://script.google.com/macros/s/AKfycbyxlxmbhTxTFlgjfGmKQ2pkv3hkAUF7gZiSzU5i-jm34IGGz7huJADFCuJt3KUfQejO/exec";

      /* Alternar abas */
      function openTab(name) {
        document
          .querySelectorAll(".tab")
          .forEach((t) => t.classList.remove("active"));
        document
          .querySelectorAll(".content")
          .forEach((c) => c.classList.remove("active"));
        document
          .querySelector(`.tab[onclick="openTab('${name}')"]`)
          .classList.add("active");
        document.getElementById(name).classList.add("active");
      }

      /* üåô Modo escuro + troca da logo */
      function toggleDark() {
    document.body.classList.toggle("dark");

    const preto = document.querySelector(".logo-preto");
    const branco = document.querySelector(".logo-branco");

    if (document.body.classList.contains("dark")) {
        preto.style.opacity = "0";
        branco.style.opacity = "1";
    } else {
        preto.style.opacity = "1";
        branco.style.opacity = "0";
    }
}

      /* Enviar pedido */
      async function enviarPedido() {
        let nome = document.getElementById("nome").value.trim();
        const pedido = document.getElementById("pedido").value.trim();

        if (!pedido) {
          alert("Escreva seu pedido de ora√ß√£o.");
          return;
        }

        if (!nome) nome = "An√¥nimo";

        document.getElementById("status").innerText = "Enviando...";

        try {
          await fetch(API_URL, {
            method: "POST",
            body: JSON.stringify({ nome, pedido }),
          });

          document.getElementById("status").innerText = "üôè Pedido enviado!";
          document.getElementById("nome").value = "";
          document.getElementById("pedido").value = "";

          carregarPedidos();
          openTab("lista");
        } catch {
          document.getElementById("status").innerText = "Erro ao enviar.";
        }
      }

      /* Carregar pedidos */
      async function carregarPedidos() {
        const container = document.getElementById("listaContainer");
        container.innerHTML = "<p>Carregando...</p>";

        const res = await fetch(API_URL);
        const dados = await res.json();

        container.innerHTML = "";

        dados.forEach((item) => {
          container.innerHTML += `
            <div class="card">
                <h3>${item.nome}</h3>
                <p>${item.pedido}</p>
                <div class="date">${item.data}</div>
            </div>
        `;
        });
      }

      carregarPedidos();
    </script>
  </body>
</html>
